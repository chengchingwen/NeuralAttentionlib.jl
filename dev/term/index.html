<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Terminology · NeuralAttentionlib.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://chengchingwen.github.io/NeuralAttentionlib.jl/term/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">NeuralAttentionlib.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Terminology</a><ul class="internal"><li><a class="tocitem" href="#Prerequisite"><span>Prerequisite</span></a></li><li><a class="tocitem" href="#Attention"><span>Attention</span></a></li><li><a class="tocitem" href="#Attention-Mask"><span>Attention Mask</span></a></li></ul></li><li><a class="tocitem" href="../example/">Example</a></li><li><a class="tocitem" href="../api/">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Terminology</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Terminology</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/chengchingwen/NeuralAttentionlib.jl/blob/master/docs/src/term.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Terminology"><a class="docs-heading-anchor" href="#Terminology">Terminology</a><a id="Terminology-1"></a><a class="docs-heading-anchor-permalink" href="#Terminology" title="Permalink"></a></h1><p>Term and Naming explanation.</p><h2 id="Prerequisite"><a class="docs-heading-anchor" href="#Prerequisite">Prerequisite</a><a id="Prerequisite-1"></a><a class="docs-heading-anchor-permalink" href="#Prerequisite" title="Permalink"></a></h2><p>Some term for better understanding this docs.</p><h3 id=".-[PartialFunctions](https://github.com/archermarx/PartialFunctions.jl)"><a class="docs-heading-anchor" href="#.-[PartialFunctions](https://github.com/archermarx/PartialFunctions.jl)">1. <a href="https://github.com/archermarx/PartialFunctions.jl">PartialFunctions</a></a><a id=".-[PartialFunctions](https://github.com/archermarx/PartialFunctions.jl)-1"></a><a class="docs-heading-anchor-permalink" href="#.-[PartialFunctions](https://github.com/archermarx/PartialFunctions.jl)" title="Permalink"></a></h3><p>This actually live outside the scope of this package, but is extremely useful for illustrate the overall design.  We&#39;ll use the <code>$</code> operation to denote partial function application   (i.e. <code>f $ x</code> is equivanlent to <code>(arg...)-&gt;f(x, arg...)</code>).</p><h3 id=".-Feature-/-Length-/-Batch-Dimension"><a class="docs-heading-anchor" href="#.-Feature-/-Length-/-Batch-Dimension">2. Feature / Length / Batch Dimension</a><a id=".-Feature-/-Length-/-Batch-Dimension-1"></a><a class="docs-heading-anchor-permalink" href="#.-Feature-/-Length-/-Batch-Dimension" title="Permalink"></a></h3><p>Under the context of attention operation in deep learning, the input data can be viewed as a 3-dimensional array.  The <em>feature</em> dimension, the <em>length</em> dimension, and the <em>batch</em> dimension (f-dim, l-dim, b-dim for short).  Following the Julia&#39;s multidimensional array implementation  (<a href="https://en.wikipedia.org/wiki/Row-_and_column-major_order#Neither_row-major_nor_column-major">column-major</a>),  the data is store in a <code>AbstractArray{T, 3}</code> whose size is <code>(f-dim, l-dim, b-dim)</code>.</p><p>For example, given 3 sentence as a batch, each sentence have 10 word, and we choose to represent a word with  a vector of 32 element. This data will be store in an 3-dim array with size <code>(32, 10, 3)</code>.</p><p>General speaking, <em>batch</em> stands for how many independent data you are going to run in one function call,  usually just for performance/optimization need. <em>length</em> means how many entry you have for each data sample,  like the #-words in a sentence or #-pixels in an image. <em>feature</em> is the number of value you used to  represent an entry.</p><h2 id="Attention"><a class="docs-heading-anchor" href="#Attention">Attention</a><a id="Attention-1"></a><a class="docs-heading-anchor-permalink" href="#Attention" title="Permalink"></a></h2><p>The overall attention operation can be viewed as three mutually inclusive block:</p><pre><code class="nohighlight hljs">	     (main input)
	        Value           Key             Query  (Extras...)
	+---------|--------------|----------------|------|||---- Attention Operation ---+
	|         |              |                |      |||                            |
	|         |              |                |      |||   multihead, ...           |
	|         |              |                |      |||                            |
	|   +-----|--------------|----------------|------|||-----------------------+    |
	|   |     |              |                |      |||                       |    |
	|   |     |          +---|----------------|------|||-------------+         |    |
	|   |     |          |   |                |      |||             |         |    |
	|   |     |          |   |  scoring func  |      |||             |         |    |
	|   |     |          |   +------&gt;+&lt;-------+&lt;=======+             |         |    |
	|   |     |          |           |                               |         |    |
	|   |     |          |           | masked_score,                 |         |    |
	|   |     |          |           | normalized_score,             |         |    |
	|   |     |          |           | ...                           |         |    |
	|   |     |          |           |                               |         |    |
	|   |     |          +-----------|------------ Attention Score --+         |    |
	|   |     |                      |                                         |    |
	|   |     |     mixing func      |                                         |    |
	|   |     +---------&gt;+&lt;----------+                                         |    |
	|   |                |                                                     |    |
	|   +----------------|------------------------------- Mixing --------------+    |
	|                    |                                                          |
	+--------------------|----------------------------------------------------------+
	              Attentive Value
	               (main output)</code></pre><p>The attention operation is actually a special way to &quot;mix&quot; (or &quot;pick&quot; in common lecture) the input information.  In (probably) the first <a href="https://arxiv.org/abs/1409.0473">attention paper</a>, the attention is defined as weighted  sum of the input sequence given a word embedding. The idea is furthur generalize to <em>QKV attention</em> in the first  <a href="https://arxiv.org/abs/1706.03762">transformer paper</a>. </p><h3 id=".-Attention-Score"><a class="docs-heading-anchor" href="#.-Attention-Score">1. Attention Score</a><a id=".-Attention-Score-1"></a><a class="docs-heading-anchor-permalink" href="#.-Attention-Score" title="Permalink"></a></h3><p>The attention score is used to decide how much the each piece of input information will contribute to the  output value and also how many entry the attention operation will output. The operation that will modify  the attention score matrix should be consider as part of this block. For example: Different attention masks  (local attention, random attention, ...), normalization (softmax, l2-norm, ...), and some special attention  that take other inputs (transformer decoder, relative position encoding, ...).</p><h3 id=".-Mixing"><a class="docs-heading-anchor" href="#.-Mixing">2. Mixing</a><a id=".-Mixing-1"></a><a class="docs-heading-anchor-permalink" href="#.-Mixing" title="Permalink"></a></h3><p>We refer to the operation that take the attention score and input value as &quot;mixing&quot;. Usually it&#39;s just a  weighted sum over the input value and use the attention score as the weight.</p><h3 id=".-Attention-Operation"><a class="docs-heading-anchor" href="#.-Attention-Operation">3. Attention Operation</a><a id=".-Attention-Operation-1"></a><a class="docs-heading-anchor-permalink" href="#.-Attention-Operation" title="Permalink"></a></h3><p>The whole scoring + mixing and other pre/post processing made up an attention operation. Things like handling  multi-head should happen at this level.</p><h2 id="Attention-Mask"><a class="docs-heading-anchor" href="#Attention-Mask">Attention Mask</a><a id="Attention-Mask-1"></a><a class="docs-heading-anchor-permalink" href="#Attention-Mask" title="Permalink"></a></h2><p>Attention masks are a bunch of operation that modified the attention score.</p><h3 id=".-Dataless-mask"><a class="docs-heading-anchor" href="#.-Dataless-mask">1. Dataless mask</a><a id=".-Dataless-mask-1"></a><a class="docs-heading-anchor-permalink" href="#.-Dataless-mask" title="Permalink"></a></h3><p>We use &quot;dataless&quot; to refer to masks that are independent to the input. For example, <code>CausalMask</code> works the same  on each data regardless of the batch size or the data content.</p><h3 id=".-Array-mask"><a class="docs-heading-anchor" href="#.-Array-mask">2. Array mask</a><a id=".-Array-mask-1"></a><a class="docs-heading-anchor-permalink" href="#.-Array-mask" title="Permalink"></a></h3><p>We call the mask that is dependent to the input as &quot;array mask&quot;. For example, <code>SymLengthMask</code> is used to avoid  the padding token being considered in the attention operation, thus each data batch might have different mask value.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../example/">Example »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Wednesday 26 October 2022 09:52">Wednesday 26 October 2022</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
